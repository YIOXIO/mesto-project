(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.classList.add("popup_opened"),e.addEventListener("click",n),document.addEventListener("keydown",o)}function r(e){e.classList.remove("popup_opened"),e.removeEventListener("click",n),document.removeEventListener("keydown",o)}function n(e){e.target===e.currentTarget&&r(e.target)}function o(e){"Escape"===e.key&&r(document.querySelector(".popup_opened"))}e.d({},{WO:()=>C,zf:()=>j,Fx:()=>E,oy:()=>L,eB:()=>q,BG:()=>g,Ps:()=>x,N_:()=>_,vi:()=>f,hO:()=>p,d3:()=>h,Rf:()=>v,$3:()=>w,Hy:()=>b,rC:()=>y});var c={baseUrl:"https://nomoreparties.co/v1/plus-cohort-24",headers:{authorization:"eb0f5dbc-8b03-4a49-97c7-ce41064b06b6","Content-type":"application/json"}},a=document.querySelector(".card-template").content.querySelector(".card"),i=document.querySelector(".elements__cards");function u(e){i.prepend(function(e){var r=a.cloneNode(!0),n=r.querySelector(".card__image");return n.src=e.link,n.alt=e.name,r.querySelector(".card__name").textContent=e.name,r.querySelector(".card__trash").addEventListener("click",s),r.querySelector(".card__like").addEventListener("click",l),n.addEventListener("click",(function(){return function(e){t(f),x.src=e.link,x.alt=e.name,p.textContent=e.name}(e)})),r}(e))}function s(e){var t=e.target.closest(".card"),r=document.querySelector(".popup_confirm");r.classList.add("popup_opened"),r.querySelector(".form__submit_confirm").addEventListener("click",(function(){t.remove(),r.classList.remove("popup_opened")}))}function l(e){e.target.closest(".card__like").classList.toggle("card__like_active")}function d(e,t,r){var n=function(e){return e.some((function(e){return!e.validity.valid}))}(e);t.classList.toggle(r.inactiveButtonClass,n),t.disabled=n}[{name:"Otherwise by Morcheeba",link:"https://avatars.yandex.net/get-music-content/33216/936f6bc8.a.154906-1/m1000x1000?webp=false"},{name:"Song of crickets by Parov Stelar",link:"https://is2-ssl.mzstatic.com/image/thumb/Music69/v4/72/6f/61/726f6198-a693-8049-6ca8-ff094c2be671/cover.jpg/1200x1200bf-60.jpg"},{name:"Eyesdown by Bonobo & Andreya Triana",link:"https://is1-ssl.mzstatic.com/image/thumb/Music/e1/72/ef/mzi.xhjloncl.jpg/1200x1200bf-60.jpg"},{name:"Web of Deception by Thievery Corporation",link:"https://is5-ssl.mzstatic.com/image/thumb/Music114/v4/aa/9f/f2/aa9ff27c-0525-8706-7b22-427b519b9db0/795103017726_Cover.jpg/1200x1200bf-60.jpg"},{name:"Boomerang by Gabin",link:"https://avatars.yandex.net/get-music-content/4010467/62a109c6.a.13223492-1/m1000x1000?webp=false"},{name:"Stoned and Alone by Findlay",link:"https://rocknfolk-cdn.respawn.fr/wp-content/uploads/2017/02/fpleasure.jpg"}].forEach(u),fetch("".concat(c.baseUrl,"/users/me"),{method:"GET",headers:c.headers}).then((function(e){return e.ok?e.json():Promise.reject("error: ".concat(e.status))})).then((function(e){y.textContent=e.name,b.textContent=e.about,w.src=e.avatar})).catch((function(e){return console.log(e)}));var m,f=document.querySelector(".popup_image-form"),p=f.querySelector(".popup__caption"),v=document.querySelector(".popup_profile-edit"),_=document.querySelector(".popup_profile-avatar"),y=document.querySelector(".profile__name"),b=document.querySelector(".profile__duty"),h=document.querySelector(".popup_new-place"),S=document.forms["profile-form"],g=S.querySelector(".form__input_name"),q=S.querySelector(".form__input_duty"),k=document.forms["card-form"],L=k.querySelector(".form__input_url"),E=k.querySelector(".form__input_place"),C=document.forms["avatar-form"],x=document.querySelector(".popup__image"),j=C.querySelector(".form__input_avatar"),w=document.querySelector(".profile__avatar"),A=document.querySelector(".profile__edit-button"),B=document.querySelector(".profile__button"),P=document.querySelector(".profile__overlay"),O=document.querySelectorAll(".popup__close-button");m={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input-error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(m.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){return e.preventDefault()})),function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);d(r,n,t),r.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.classList.add(n.errorClass),o.textContent=r}(e,t,t.validationMessage,r)}(e,o,t),d(r,n,t)}))})),d(r,n,t),e.addEventListener("reset",(function(){!function(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}(n,t)}))}(e,m)})),P.addEventListener("click",(function(){t(_)})),A.addEventListener("click",(function(){t(v),g.value=y.textContent,q.value=b.textContent})),C.addEventListener("submit",(function(e){e.preventDefault();var t,n=j.value;(t=avatarValue,fetch("".concat(c.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:c.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("error: ".concat(e.status))}))).then((function(e){w.src=e.avatar,C.reset(),r(n)})).catch((function(e){console.log(e)}))})),S.addEventListener("submit",(function(e){var t,n;e.preventDefault(),(t=g.value,n=q.value,fetch("".concat(c.baseUrl,"/users/me"),{method:"PATCH",headers:c.headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("error: ".concat(e.status))}))).then((function(e){y.textContent=e.name,b.textContent=e.about,r(v)})).catch((function(e){return console.log(e)}))})),k.addEventListener("submit",(function(e){e.preventDefault();var t={};t.name=E.value,t.link=L.value,u(t),e.target.reset(),r(h)})),B.addEventListener("click",(function(){t(h)})),O.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return r(t)}))}))})();